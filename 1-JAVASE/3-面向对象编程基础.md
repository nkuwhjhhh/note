# Part 3 面向对象编程(基础)

> - Java类及类的成员：（重点）属性、方法、构造器；（熟悉）代码块、内部类
> - 面向对象的特征：封装、继承、多态、（抽象）
> - 其他关键字的使用：this、super、package、import、static、final、interface、abstract等

### 0. 匿名对象

不定义对象的句柄，而直接调用这个对象的方法。如：new Person().shout();

使用情况：如果一个对象只需要进行一次方法调用，那么就可以使用匿名对象。 经常将匿名对象作为实参传递给一个方法调用。



### 1. 成员变量

#### 1.1 修饰符

​	常用的权限修饰符有：private、缺省、protected、public

​	其他修饰符：static、final

#### 1.2 初始化值

​	可以显式赋值；也可以不赋值，使用默认值

![image-20240228164709180](C:\Users\86158\AppData\Roaming\Typora\typora-user-images\image-20240228164709180.png)

#### 1.3 成员变量VS局部变量

> 相同点
>
> 1. 变量声明的格式相同
> 2. 变量必须先声明、后初始化、再使用。
> 3. 变量都有其对应的作用域，只在其作用域内是有效的
>
> 不同点
>
> |                        | 实例变量                                                     | 局部变量                                                     |
> | ---------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
> | 声明位置和方式         | 在类中方法外                                                 | 在方法体{}中或方法的形参列表、代码块中                       |
> | 在内存中存储的位置不同 | 堆                                                           | 栈                                                           |
> | 生命周期               | 和对象的生命周期一样，随着对象的创建而存在，随着对象被GC回收而消亡， 而且每一个对象的实例变量是独立的。 | 和方法调用的生命周期一样，每一次方法 被调用而在存在，随着方法执行的结束而消亡， 而且每一次方法调用都是独立。 |
> | 作用域                 | 通过对象就可以使用，本类中直接调用，其他类中“对象.实例变量”  | 出了作用域就不能使用                                         |
> | 修饰符                 | public, protected, private, final, volatile, transient等     | final                                                        |
> | 默认值                 | 有默认值                                                     | 没有，必须手动初始化。其中的形参比较特殊， 靠实参给它初始化。 |



### 2. 方法

#### 2.1 好处

​	实现代码重用，减少冗余，简化代码。

#### 2.2 位置

​	Java里的方法不能独立存在，所有的方法必须定义在类里。

#### 2.3 包含

​	方法头可能包含5个部分：修饰符，返回值类型，方法名，形参列表，throws异常列表

#### 2.4 可能会出现的报错

​	return语句后面就不能再写其他代码了，否则会报错：Unreachable code

#### 2.5 方法调动内存分析

1. 没有被调用：在方法区中的字节码文件(.class)中存储。 
2. 被调用：进入栈的过程



### 3. 对象数组

注意：首先要创建数组对象本身，即确定数组的长度，然后再创建每一个元素对象，如果不创建， 数组的元素的默认值就是null ，所以很容易出现空指针异常NullPointerException 。



### 4. 方法重载

#### 4.1 重载的特点

​	**只看**参数列表，且参数列表必须不同。(参数个数或参数类型)。与修饰符、返回值类型无关。



### 5. 可变个数的形参

​	当定义一个方法时，形参的类型可以确定，但是形参的个数不确定，那么可以考虑使用可变个数的形参。

##### 5.1.1 格式

```java
//JDK 5.0以前：采用数组形参来定义方法，传入多个同一类型变量
public static void test(int a ,String[] books);
//JDK5.0：采用可变个数形参来定义方法，传入多个同一类型变量
public static void test(int a ,String...books);
```

##### 5.1.2 特点

1. 可变参数：方法参数部分指定类型的参数个数是可变多个：0个，1个或多个
2. 可变参数方法的使用与方法参数部分使用数组是一致的，二者不能同时声明，否则报错。
3. 可变形参只能有一个，而且必须放在参数列表最后。
4. 若出现匹配多个的情况，优先匹配没有可变参数的。若都有可变参数，则报错“都匹配”。



### 6. 方法的参数传递机制

Java里方法的参数传递方式只有一种： 值传递。

基本数据类型——“数据值”，引用数据类型——“地址值”。



### 7. 关键字package、import

指明该文件中定义的类、接口等结构所在的包。

```java
package 顶层包名.子包名;
```

- 包对应于文件系统的目录，package语句中用 “.” 来指明包(目录)的层次，每.一次就表示一层文件目录。
- 同一个包下可以声明多个结构（类、接口），但是不能定义同名的结构（类、接口）。不同的包下可以定义同名的结构（类、接口）。
- JDK中主要的包
  - java.lang ----包含一些Java语言的核心类，如String、Math、Integer、 System和Thread，提供常用功能。
  - java.net ----包含执行与网络相关的操作的类和接口。
  - java.io ----包含能提供多种输入/输出功能的类。
  - java.util ----包含一些实用工具类，如定义系统特性、接口的集合框架类、使用与日期日历相关的函数。
  - java.text ----包含了一些java格式化相关的类
  - java.sql ----包含了java进行JDBC数据库编程的相关类/接口
  - java.awt ----包含了构成抽象窗口工具集（abstract window toolkits）的多个类，这些类被用来构建和管理应用程序的图形用户界面(GUI)。



### 8. import

显式引入指定包下所需要的类

```java
import 包名.类名;
```

- 要导入java.lang或者当前包下可以省略此import语句。
- 如果已经导入java.a包下的类，那么如果需要使用a包的子包下的类的话，仍然需要导入。
- 如果在代码中使用不同包下的同名的类，那么就需要使用类的全类名的方式指明调用的是哪个类。
- （了解） import static 组合的使用：调用指定类或接口下的静态的属性或方法



### 9. 面向对象特征一：封装性(encapsulation)

所谓封装，就是把客观事物封装成抽象概念的类，并且类可以把自己的数据和方法只向可信的类或者对象开放，向没必要开放的类或者对象隐藏信息。面向对象的开发原则要遵循“ 高内聚、低耦合 ”。

#### 9.1 如何实现封装

权限修饰符控制类或成员的可见性范围。

| 修饰符    | 本类 | 本包                      | 其他包子类                  | 其他包非子类 |
| --------- | ---- | ------------------------- | --------------------------- | ------------ |
| private   | √    | ×                         | ×                           | ×            |
| 缺省      | √    | √（本包子类非子类都可见） | ×                           | ×            |
| protected | √    | √（本包子类非子类都可见） | √（其他包仅限于子类中可见） | ×            |
| public    | √    | √                         | √                           | √            |

外部类——只能用public、缺省修饰。

成员变量、成员方法、构造器、成员内部类——可用public、protected、缺省、private。



#### 9.2 封装性的体现

1. 成员变量/属性私有化：私有化类的成员变量，提供set和get方法
   1. 方便在方法中加入控制逻辑，限制对成员变量的不合理访问。还可以进行数据检查，从而有利于保证对象信息的完整性。
   2. 便于修改内部的”隐藏部分“，提高代码的可维护性。其好处类似于数据库中的二级映射。
2. 私有化方法





### 10. 构造器

1. 构造器的修饰符只能是权限修饰符，不能被其他任何修饰。
2. 没有提供显式构造器，系统会默认提供一个修饰符与类修饰符相同的无参构造器。
3. 提供显式构造器，系统就不再提供默认的无参的构造器了。



### 11. 类中属性赋值过程

1、在类的属性中，可以有哪些位置给属性赋值？

① 默认初始化 

② 显式初始化 

③ 构造器中初始化 

④ 通过"对象.属性"或"对象.方法"的方式，给属性赋值

2、这些位置执行的先后顺序是怎样？ 

顺序：① - ② - ③ - ④ 

3、说明：上述中的①、②、③在对象创建过程中，只执行一次。 ④ 是在对象创建后执行的，可以根据需求多次执行。



### 12. JavaBean

JavaBean是一个遵循特定写法的Java类，①类是公共的，②有一个无参的公共的构造器，③有属性，且有对应的get、set方法。

> 在JSP中使用JavaBean
>
> - \<jsp:useBean>标签：用于在JSP页面中查找或实例化一个JavaBean组件。
> - \<jsp:setProperty>标签：用于在JSP页面中设置一个JavaBean组件的属性。
> - \<jsp:getProperty>标签：用于在JSP页面中获取一个JavaBean组件的属性。



